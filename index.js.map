{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./index.ts","webpack:///./src/Controller.ts","webpack:///external \"express-csv\"","webpack:///external \"hc-utilities\"","webpack:///external \"util\""],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all compiled WebAssembly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export { Controller, IControllerFrameworkConfig } from './src/Controller'\n","import { Request, Response } from 'express';\nimport { Keygen } from 'hc-utilities';\nimport * as util from \"util\";\n\nrequire('express-csv');\n\nconst isNumeric = (n: any) => {\n  return !isNaN(parseFloat(n)) && isFinite(n);\n};\n\nexport interface IServerDetails {\n  name: string;\n  description: string;\n  env: string;\n  version: string;\n}\n\nexport interface IRequestDetails {\n  url: string;\n  method: string;\n  route: string;\n}\n\n// export interface IResponse extends Response {\n//   unusedKey?: string\n// }\n\nexport interface IResponseEnvelope {\n  code: number;\n  success: boolean;\n  server: IServerDetails;\n  request: IRequestDetails;\n  time: string;\n  data?: object;\n  error?: string;\n  breadcrumb?: string;\n  stack?: string;\n  meta?: any;\n  message?: string;\n}\n\nexport interface IErrorParams {\n  code: number;\n  error?: string | object | Error;\n  stack?: string;\n  message?: string;\n}\n\nexport interface IOkParams {\n  code: number;\n  data?: object;\n  message?: string;\n}\n\nexport interface IRouteConfig {\n  queryParams?: Array<string>;\n  routeParams?: Array<string>;\n  bodyParams?: Array<string>;\n  okCode?: number;\n  failCode?: number;\n}\n\nexport interface IParamsObject {\n  [key: string]: any;\n}\n\nexport interface IControllerFrameworkConfig {\n  instrumentAllRequests: boolean;\n  instrumentAllErrors: boolean;\n  instrument500Errors: boolean;\n  instrumentErrorRequestBodies: boolean;\n  instrumentErrorRequestBodiesRouteBlacklist: Array<string>;\n  environmentDescriptor: string;\n  packageConfig: {\n    packageName: string;\n    packageDescription: string;\n    packageVersion: string;\n  };\n}\n\nexport interface IControllerFrameworkConfigParams {\n  instrumentAllRequests?: boolean;\n  instrumentAllErrors?: boolean;\n  instrument500Errors?: boolean;\n  instrumentErrorRequestBodies?: boolean;\n  instrumentErrorRequestBodiesRouteBlacklist?: Array<string>;\n  environmentDescriptor?: string;\n  packageConfig?: {\n    packageName: string;\n    packageDescription: string;\n    packageVersion: string;\n  };\n}\n\nconst HTTP_CODE_MAX = 600;\nconst HTTP_CODE_SERVER_ERROR = 500;\nconst HTTP_CODE_INPUT_ERROR = 400;\nconst HTTP_CODE_OK = 200;\n\n/**\n * Constructor\n *\n * @class BaseRoute\n */\nexport abstract class Controller {\n  private static frameworkConfig: IControllerFrameworkConfig = {\n    instrumentAllRequests: false,\n    instrumentAllErrors: false,\n    instrument500Errors: true,\n    instrumentErrorRequestBodies: false,\n    instrumentErrorRequestBodiesRouteBlacklist: [],\n    environmentDescriptor: 'env',\n    packageConfig: {\n      packageName: 'Default Package Name',\n      packageDescription: 'Default Package Description',\n      packageVersion: 'Default Package Version',\n    },\n  };\n\n  protected requiredQueryParams: Array<string>;\n  protected requiredRouteParams: Array<string>;\n  protected requiredBodyParams: Array<string>;\n  protected successCode = HTTP_CODE_OK;\n  protected failureCode = HTTP_CODE_SERVER_ERROR;\n\n  /**\n   * Constructor\n   *\n   * @class BaseRoute\n   * @constructor\n   */\n  constructor(config?: IRouteConfig) {\n    config = config || {};\n    this.requiredQueryParams = config.queryParams || [];\n    this.requiredRouteParams = config.routeParams || [];\n    this.requiredBodyParams = config.bodyParams || [];\n    this.successCode = config.okCode || HTTP_CODE_OK;\n    this.failureCode = config.failCode || HTTP_CODE_SERVER_ERROR;\n  }\n\n  public static configure(config: IControllerFrameworkConfigParams) {\n    Object.assign(this.frameworkConfig, config);\n  }\n\n  public static getConfiguration(): IControllerFrameworkConfig {\n    return this.frameworkConfig;\n  }\n\n  /**\n   * errResponse\n   *\n   * @param req\n   * @param res\n   * @param title\n   * @returns {(params:any)=>undefined}\n   */\n  public static errResponse(req: Request, res: Response, title: string) {\n    return (params: IErrorParams) => {\n      let code = HTTP_CODE_SERVER_ERROR;\n      let meta;\n      if (params.code && isNumeric(params.code) && params.code < HTTP_CODE_MAX) {\n        code = params.code;\n      } else {\n        meta = 'Error code: ' + params.code;\n      }\n\n      const response = Controller.responseEnvelope(\n        req,\n        title,\n        code,\n        false,\n        undefined,\n        params.error || params,\n        params.stack,\n        meta,\n        params.message\n      );\n\n      if (\n        (code === HTTP_CODE_SERVER_ERROR && this.frameworkConfig.instrument500Errors) ||\n        this.frameworkConfig.instrumentAllErrors\n      ) {\n        console.log(code + ' error: ' + JSON.stringify(response, null, 2));\n\n        if (response.stack !== undefined) {\n          console.log('Stack: ' + response.stack.replace(/\\\\n/g, '\\n'));\n        }\n\n        if (params.error !== undefined && params.error.constructor === Error) {\n          const error = params.error as Error;\n          if (error.stack !== undefined) {\n            console.log('Stack: ' + error.stack.replace(/\\\\n/g, '\\n'));\n          }\n        }\n\n        if (\n          req.body &&\n          this.frameworkConfig.instrumentErrorRequestBodies &&\n          this.frameworkConfig.instrumentErrorRequestBodiesRouteBlacklist.indexOf(req.url) === -1\n        ) {\n          console.log('Request body for error was: ' + JSON.stringify(req.body, null, 2));\n        }\n      }\n\n      res.status(code).json(response);\n    };\n  }\n\n  /**\n   * okResponse\n   *\n   * @param req\n   * @param res\n   * @param title\n   * @returns {(params:any)=>undefined}\n   */\n  public static okResponse(req: Request, res: Response, title: string) {\n    return (params: IOkParams) => {\n      /*\n       if (params.code !== undefined && params.data !== undefined){\n       res.success(responseEnvelope(req,params.code,1,params.data,null));\n       } else {\n       res.success(responseEnvelope(req,200,1,params,null));\n       }\n       */\n\n      res\n        .status(params.code || HTTP_CODE_OK)\n        .json(\n          Controller.responseEnvelope(req, title, params.code, true, params.data, null, undefined, null, params.message)\n        );\n    };\n  }\n\n  private static responseEnvelope(\n    req: Request,\n    routeTitle: string,\n    code: number,\n    success: boolean,\n    data?: object,\n    error?: any,\n    stack?: string,\n    meta?: any,\n    message?: string\n  ) {\n    const response: IResponseEnvelope = {\n      code,\n      success,\n      time: new Date().toISOString(),\n      server: {\n        name: this.frameworkConfig.packageConfig.packageName,\n        description: this.frameworkConfig.packageConfig.packageDescription,\n        env: this.frameworkConfig.environmentDescriptor,\n        version: this.frameworkConfig.packageConfig.packageVersion,\n      },\n      request: {\n        url: req.originalUrl,\n        method: req.method,\n        route: routeTitle,\n      },\n    };\n    if (data) {\n      response.data = data;\n    }\n    if (error) {\n      if (error.constructor === Error) {\n        response.error = error.message;\n        response.stack = error.stack;\n      } else {\n        response.error = error;\n        response.stack = stack;\n      }\n      response.breadcrumb = Keygen.uid(6).toUpperCase();\n    }\n    if (meta) {\n      response.meta = meta;\n    }\n    if (message) {\n      response.message = message;\n    }\n    return response;\n  }\n\n  public zipFile() {\n    return (req: Request, res: Response) => {\n      try {\n        this.runRequest(req, res)\n          .then((zipResult: any) => {\n            if (!zipResult.data || !zipResult.fileName) {\n              Controller.errResponse(req, res, this.constructor.name)({\n                code: 500,\n                error: 'ZIP route result must include data and fileName',\n              });\n            } else {\n              res.set('Content-Type', 'application/zip');\n              res.set('Content-Disposition', 'attachment; filename=' + zipResult.fileName);\n              res.set('Content-Length', zipResult.data.length);\n              res.end(zipResult.data, 'binary');\n            }\n          })\n          .catch(err => {\n            this.handleError(req, res, err);\n          });\n      } catch (err) {\n        this.handleError(req, res, err);\n      }\n    };\n  }\n\n  public csvFile() {\n    return (req: Request, res: Response) => {\n      try {\n        this.runRequest(req, res)\n          .then(result => {\n            if (result.constructor !== Array) {\n              Controller.errResponse(req, res, this.constructor.name)({\n                code: 500,\n                error: 'CSV route emitted non-array result: ' + result.constructor.name,\n              });\n            } else {\n              (res as any).csv(result);\n            }\n          })\n          .catch(err => {\n            this.handleError(req, res, err);\n          });\n      } catch (handlerError) {\n        this.handleError(req, res, handlerError);\n      }\n    };\n  }\n\n  public jsonAPI() {\n    return (req: Request, res: Response) => {\n      const start = new Date();\n      try {\n        this.runRequest(req, res)\n          .then(handlerResult => {\n            handlerResult = handlerResult || {};\n            if (util.types.isPromise(handlerResult)) {\n              console.log('Warning, handler result is a promise, did you forget to await?');\n            }\n            const payload =\n              handlerResult.code !== undefined\n                ? handlerResult\n                : {\n                    code: this.successCode,\n                    data: handlerResult,\n                  };\n\n            if (Controller.frameworkConfig.instrumentAllRequests) {\n              console.log(\n                req.method +\n                  ' ' +\n                  req.url +\n                  ' ' +\n                  (new Date().getTime() - start.getTime()).toFixed(2) +\n                  ' ms, status=' +\n                  payload.code\n              );\n            }\n\n            Controller.okResponse(req, res, this.constructor.name)(payload);\n          })\n          .catch(err => {\n            this.handleError(req, res, err);\n          });\n      } catch (handlerError) {\n        this.handleError(req, res, handlerError);\n      }\n    };\n  }\n\n  protected abstract async handleRequest(params: any, req: Request, res: Response): Promise<any>;\n\n  private async runRequest(req: Request, res: Response) {\n    const params = await this.parseParams(req);\n    return await this.handleRequest(params, req, res);\n  }\n\n  private handleError(req: Request, res: Response, handlerError: any) {\n    handlerError = handlerError || {};\n    const code = handlerError.code || this.failureCode;\n    const error = handlerError.error || handlerError.response || handlerError.message || handlerError;\n    console.log('Error ' + code + ' during request: ' + JSON.stringify(error) + ', ');\n    if (handlerError.stack) {\n      console.log('stack: ' + handlerError.stack);\n    }\n    Controller.errResponse(req, res, this.constructor.name)({ code, error, stack: handlerError.stack });\n  }\n\n  private parseParams(req: Request): Promise<IParamsObject> {\n    const parameters: IParamsObject = {};\n    for (let paramIdx = 0; paramIdx < this.requiredQueryParams.length; paramIdx++) {\n      const requiredParam = this.requiredQueryParams[paramIdx];\n      const foundParam: any = req.query[requiredParam];\n      if (foundParam === undefined) {\n        return Promise.reject({\n          code: HTTP_CODE_INPUT_ERROR,\n          error: 'Required query parameter not found in request url: ' + requiredParam,\n        });\n      } else {\n        parameters[requiredParam] = foundParam;\n      }\n    }\n    for (let paramIdx = 0; paramIdx < this.requiredRouteParams.length; paramIdx++) {\n      const requiredParam = this.requiredRouteParams[paramIdx];\n      const foundParam = req.params[requiredParam];\n      if (foundParam === undefined) {\n        return Promise.reject({\n          code: HTTP_CODE_SERVER_ERROR,\n          error: 'Required route parameter not mapped for request: ' + requiredParam,\n        });\n      } else {\n        parameters[requiredParam] = foundParam;\n      }\n    }\n    for (let paramIdx = 0; paramIdx < this.requiredBodyParams.length; paramIdx++) {\n      const requiredParam = this.requiredBodyParams[paramIdx];\n      const foundParam = req.body[requiredParam];\n      if (foundParam === undefined) {\n        return Promise.reject({\n          code: HTTP_CODE_SERVER_ERROR,\n          error: 'Required body parameter not included with request: ' + requiredParam,\n        });\n      } else {\n        parameters[requiredParam] = foundParam;\n      }\n    }\n\n    return Promise.resolve(parameters);\n  }\n}\n","module.exports = require(\"express-csv\");","module.exports = require(\"hc-utilities\");","module.exports = require(\"util\");"],"sourceRoot":""}